{"version":3,"sources":["app.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"all.js","sourcesContent":["(function($){\n\n    // var aboutSection = $('.section-blue');\n\n    // $('.main-button').click(function () {\n    //     $('html, body').animate({\n    //         scrollTop: aboutSection.offset().top\n    //     }, 500);\n    //     return false;\n    // });\n\n    var $window = $(window);\n    var nav = $('nav');\n    var $navLinks = $('.nav-list-link:not(.normal)');\n    var $htmlAndBody = $('html, body');\n    var $sections = $('.section');\n\n    $navLinks.on(\"click\", function(e) {\n        e.preventDefault();\n        var $self = $(this);\n        var sectionId = $self.data(\"section-id\");\n\n        $htmlAndBody.animate({\n            scrollTop: $(\"#\" + sectionId)\n                .offset()\n                .top - 50\n        }, 300, function() {\n            $navLinks.removeClass(\"active\");\n            $self.addClass(\"active\");\n        });\n    });\n\n    $('.Category__button').on(\"click\", function(e) {\n        e.preventDefault();\n        var $self = $(this);\n        var sectionId = $self.data(\"section-id\");\n\n        $htmlAndBody.animate({\n            scrollTop: $(\"#\" + sectionId)\n                .offset()\n                .top - 50\n        }, 300, function() {\n            $navLinks.removeClass(\"active\");\n            $self.addClass(\"active\");\n            $(\"a[data-section-id=\" + sectionId + \"]\").addClass(\"active\");\n            console.log('section id: ' + sectionId);\n        });\n    });\n\n\n\n    $window.on('mousewheel scroll', function() {\n        var aboveBlocks = $sections.map(function(i, section) {\n            if (section.getBoundingClientRect().top <= $window.height() / 3) {\n                return section;\n            }\n        });\n        $navLinks.removeClass(\"active\");\n        $($navLinks[aboveBlocks.length - 1]).addClass(\"active\");\n    });\n\n    $('.hamburger-button').click(function() {\n\n        if (nav.hasClass('open')) {\n            nav.removeClass('open');\n            return;\n        }\n\n        nav.addClass('open');\n    });\n\n    $(window).resize(function () {\n        if ($window.width > 610 && isScreenLarge === false) {\n            isScreenLarge = true;\n            nav.removeClass('compact'); \n            nav.removeClass('open');\n            hamburgerButton.removeClass('active');\n        } \n\n        if ($window <= 610 && isScreenLarge === true) {\n            isScreenLarge = false;\n            nav.addClass('compact');\n        }\n    }); \n\n    var updateValidErrors = function ($form, validErrors) { \n        console.log(validErrors);\n        $form.find('input, textarea').each(function (index, input) { \n            var $input = $(input);\n            var fieldName = $input.attr('name');\n            var $errorBlock = $input.next('.error');\n            var $errorMsg; \n\n            if (validErrors[fieldName] != null) {\n                switch(fieldName) {\n                    case 'email':\n                        $errorMsg = validErrors[fieldName][0];\n                        break;\n                    case 'password':\n                        $errorMsg = validErrors[fieldName][0].replace('password', 'пароль');\n                        break;\n                    case 'message':\n                        $errorMsg = validErrors[fieldName][0].replace('message', 'сообщение');\n                }\n                $errorBlock.text($errorMsg);\n            } else {\n                $errorBlock.text('');\n            }\n        });\n    };\n\n    $('.modal-form').submit(function (e) { \n        e.preventDefault();\n\n        var $this = $(this);\n\n        $this.find('i').css('visibility', 'visible');\n\n        var request = $.ajax({\n            url: $this.attr('action'),\n            method: 'POST',\n            data: $this.serialize()\n        });\n\n        request.done(function (response) {\n            $this.find('i').css('visibility', 'hidden');\n            if ($this.closest('.remodal').length != 0) {\n//                $('.Nav__item--modal').remove();\n//                $('.Nav__list').append('<li class=\"Nav__item\"><a href=\"/profile\" class=\"Nav__link\"><span>My profile</span></a></li>');\n//                $('.Nav__list').append('<li class=\"Nav__item\"><a href=\"/logout\" class=\"Nav__link\"><span>Logout</span></a></li>');\n//                ohSnap(response.notify, {color: 'green'});\n            } else {\n                //updateValidErrors($this, {});\n                //console.log('second');\n                //ohSnap(response.notifyMessage, {color: 'green'});\n                //$this.next().html(response.notify);\n                //$('html, body').animate({scrollTop: $('.Block').position().top}, 'slow');\n            }\n            if ($this.attr('action') != '/email') {\n                document.location = '/';\n            } else {\n                console.log('niko');\n                ohSnap(response.notify, {color: 'green'});\n                $this.find('.remodal-cancel').trigger('click');\n            }\n            \n        });\n\n        request.fail(function (response) { \n            $this.find('i').css('visibility', 'hidden');\n            var errors = JSON.parse(response.responseText); \n            if (errors.notify) {\n                updateValidErrors($this, {});\n            } else {\n                updateValidErrors($this, errors);\n            }\n            ohSnap(errors.notify || 'пожалуйста, исправьте ошибки в форме', {color: 'red'});\n        });\n    });\n\n    //show flash message in alert\n    var flashMessage = $('#ohsnap').data('notify')\n    if (flashMessage != null) { \n        ohSnap(flashMessage, {color: 'green'});\n    }\n\n})(jQuery);\n"],"sourceRoot":"/source/"}